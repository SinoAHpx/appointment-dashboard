# 更新日志

## [0.5.2] - YYYY-MM-DD (Please fill in the current date)

### 改进
- 使用 Biome 自动格式化代码库并移除未使用的代码。

### 修复
- 修正仪表盘页面中筛选可用员工和车辆时使用的属性（应为 `status` 而非 `isAvailable`）。

## [0.5.1] - 2024-06-16

### 改进
- 增强SQLite数据库连接的稳定性和错误处理
- 优化数据库初始化过程，添加更详细的日志输出
- 改进数据库连接管理，在连接失败时正确重置状态
- 优化错误信息显示，便于调试
- 重构数据库模块导出方式，避免初始化顺序问题

## [0.5.0] - 2024-06-15

### 添加
- 集成 Bun:sqlite 数据库驱动
- 新建数据库表结构：users, staff, vehicles, appointments, customers
- 为每个实体创建数据库查询模块（queries）
- 新建API端点：/api/staff, /api/vehicles, /api/customers, /api/appointments
- 在所有数据库操作中实现 getDb() 单例模式以确保连接安全
- 在车辆和员工的删除操作中添加级联更新逻辑（外键关系处理）
- 为每个实体实现完整的CRUD API操作
- 实现完整的API错误处理和验证

### 改进
- 将所有Zustand状态管理器从直接访问数据库改为通过API访问
- 清晰地分离客户端和服务端代码
- 为所有Zustand存储添加persist中间件，确保会话数据持久化
- 优化数据库连接管理，防止服务器端组件中的连接泄漏
- 更新Next.js配置以支持bun:sqlite模块
- 改进包导入结构，避免循环依赖

### 删除
- 移除users.json模拟数据文件，完全迁移到SQLite数据库
- 删除所有模拟数据生成代码
- 删除过时的delay()模拟函数

## [0.4.3] - 2024-06-05

### 改进
- 将仪表盘统计卡片连接到Zustand状态管理
- 实现仪表盘统计卡片点击跳转功能
- 从仪表盘移除"数据报表"卡片

## [0.4.2] - 2024-06-05

### 改进
- 全面优化仪表盘首页，添加统计卡片和快速导航
- 添加各模块数据概览（预约、人员、车辆、客户等）
- 基于用户角色（管理员/普通用户）显示不同内容
- 使用Lucide React图标提升视觉体验
- 增加直接跳转到各功能模块的按钮

## [0.4.1] - 2024-06-04

### 改进
- 优化仪表盘顶部标题栏，移除容器的左右margin，使其占满100%宽度

## [0.4.0] - 2024-06-03

### 添加
- 基于角色的访问控制（RBAC）系统
- 用户权限区分（管理员和普通用户）
- 基于JSON文件的用户数据管理
- 新的登录API端点（/api/auth）
- 用户信息显示在仪表盘顶部
- 用户角色标识显示
- 测试账号信息提示在登录页面

### 改进
- 普通用户现在仅能查看和创建预约，不能编辑或删除
- 普通用户仅能访问仪表盘和预约管理页面
- 管理员可访问所有功能
- 优化认证流程，现在使用实际API验证
- 未授权访问的页面将自动重定向并显示提示信息
- 登录页面UI优化

## [0.3.0] - 2024-06-01

### 添加
- 预约管理页面（创建、编辑、删除、查看预约）
- 用户管理页面（创建、编辑、删除、查看客户信息）
- 人员管理页面（添加、编辑、删除员工及其状态）
- 车辆管理页面（添加、编辑、删除车辆及其状态）
- 数据查询与导出页面（按条件筛选预约数据并导出CSV或Excel）
- 仪表盘侧边栏导航
- 各功能模块的Zustand状态存储
- 模拟API逻辑用于数据管理

### 改进
- 仪表盘布局优化，添加导航菜单
- 数据管理逻辑模块化
- 组件复用性提高
- 表单验证完善

## [0.2.0] - 2024-05-31

### 添加
- 仪表盘页面与路由
- 仪表盘布局组件
- 认证路由中间件
- 登录成功后自动重定向到仪表盘功能
- 登出功能

### 改进
- 优化认证流程
- 登录后的用户体验

## [0.1.0] - 2024-05-30

### 添加
- 初始项目设置
- 基于Next.js 15和React 19的项目结构
- 中文用户界面
- 登录页面和认证功能
- 注册页面与表单验证
- 主页带用户信息展示
- Zustand状态管理
- Shadcn UI组件集成
- 表单验证逻辑
- Toast通知系统

### 改进
- 响应式设计适配各种设备
- 用户友好的表单错误提示
- 登录状态持久化存储

### 修复
- 无 